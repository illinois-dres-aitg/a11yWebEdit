{% extends "base.html" %}
{% load bootstrap3 %}
{% load static %}
{% block content %}
<!-- everything that fits into the template -->

<script src="{% static 'pages/javascript/codemirror/codemirror.js' %}"></script>
<script src="{% static 'pages/javascript/codemirror/mode/javascript.js' %}"></script>
<script src="{% static 'pages/javascript/codemirror/mode/xml.js' %}"></script>
<script src="{% static 'pages/javascript/codemirror/mode/javascript.js' %}"></script>
<script src="{% static 'pages/javascript/codemirror/mode/css.js' %}"></script>

<form id="pageForm" action ="" method="POST">
	{% csrf_token %}
	{% if form.errors %}
	<p>Something went wrong.</p>
	{% endif %}
	<h1>New page</h1>
	<div class = "panel panel-default">
		<div class = "panel-body">
			{% bootstrap_button "Save" button_type="submit" button_class="btn btn-primary" extra_classes="save" %}
			{% if p %}
			<a href = "{% url 'run' p.web_key %}" class = "btn btn-primary" target = "_blank">Run</a>
			{% else %}
			{% bootstrap_button "Run" button_type="submit" button_class="btn btn-primary" extra_classes="save before-run" %}
			{% endif %}
			{% if p %}
			<a href = "{% url 'copy' p.web_key %}" class = "btn btn-primary">Copy</a>
			<a href = "{% url 'delete' p.web_key %}" class = "btn btn-danger danger">Delete</a>
			{% endif %}
		</div>
	</div>
	
	<div id = "upper-form" class="panel panel-default">
		<div class = "panel-heading">Settings</div>
			<div class = "panel-body">
				{% bootstrap_label "Title" label_for="form.title" %}
				
				{% bootstrap_field form.title show_label=False %}
		
				{% bootstrap_label "Description" label_for="form.description" %}
				
				{% bootstrap_field form.description show_label=False %}
			
				{% bootstrap_label "Web key" label_for="form.web_key" %}
				
				{% bootstrap_field form.web_key show_label=False %}
				
				{% bootstrap_field form.public show_label=False %}
				
				{% if p.lastUpdated != None %}
				<p>Last updated: {{ p.lastUpdated }}</p>
				{% endif %}
			</div>
	</div>
	</hr>
	</br>
	<div class = "panel panel-info">
		<div class = "panel-heading">
			{% bootstrap_label "HTML Head" label_for="htmlHead" %}
			<!--<button class = "btn btn-default" data-toggle="collapse" data-target="#head">Show/Hide</button>-->
		</div>
		<div id = "head" class = "collapse in">
			{{ form.htmlHead }}
		</div>
	</div>
	</br>
	
	<div class = "panel panel-info">
		<div class = "panel-heading">
			{% bootstrap_label "HTML Body" label_for="htmlBody" %}
			<!--<button class = "btn btn-default" data-toggle="collapse" data-target="#body">Show/Hide</button>-->
		</div>
		<div id = "body" class = "collapse in">
			{{ form.htmlBody }}
		</div>
	</div>
	</br>
	
	<div class = "panel panel-info">	
		<div class = "panel-heading">
			{% bootstrap_label "CSS" label_for="css" %}
			<!--<button class = "btn btn-default" data-toggle="collapse" data-target="#css">Show/Hide</button>-->
		</div>
		<div id = "css" class = "collapse in">
			{{ form.css }}
		</div>
	</div>
	</br>
	
	<div class = "panel panel-info">	
		<div class = "panel-heading">
			{% bootstrap_label "JavaScript" label_for="javascript" %}
			<!--<button class = "btn btn-default" data-toggle="collapse" data-target="#js">Show/Hide</button>-->
		</div>
		<div id = "js" class = "collapse in">
			{{ form.javascript }}
		</div>
	</div>
</form>
<script src = {% static 'pages/javascript/fixCodeMirrorLabeling.js' %}></script>
{% endblock %}
